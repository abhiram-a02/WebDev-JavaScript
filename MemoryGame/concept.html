<!DOCTYPE html>
<html>
  <head>
    <title>Memory Concepts</title>
  </head>
  <body style = "background-color: black;">
    <button class = "js-button" style = "background-color: rgb(239, 239, 239);">Click</button>
    <button class = "js-button" style = "background-color: rgb(239, 239, 239);">Click</button>
    <button class = "js-button" style = "background-color: rgb(239, 239, 239);">Click</button>
    <button class = "js-button" style = "background-color: rgb(239, 239, 239);">Click</button>
    <button class = "js-button" style = "background-color: rgb(239, 239, 239);">Click</button>
    <button class = "js-button" style = "background-color: rgb(239, 239, 239);">Click</button>
    <p class = "js-result" style = "color: white; font-family: Arial;"></p>
  </body>
  <script>
    let colorSelect = ['red', 'red', 'orange', 'orange', 'yellow', 'yellow'];
    let buttonAttributes = [];
    console.log(colorSelect);

    document.querySelectorAll('.js-button').forEach((clickButton, index) => {
      randIndex = Math.floor(Math.random() * colorSelect.length);
      buttonAttributes.push({hidden: `${colorSelect[randIndex]}`});
      colorSelect.splice(randIndex, 1);
      console.log(colorSelect);
    });

    /*
    document.querySelectorAll('.js-button').forEach((clickButton, index) => {
      clickButton.addEventListener('click', () => {
        clickButton.style.backgroundColor = `${buttonAttributes[index].hidden}`;
      });
    });
    */

    let firstClick, firstClickID, secondClick, secondClickID;

    let timeoutID;

    document.querySelectorAll('.js-button').forEach((clickButton, index) => {
      clickButton.addEventListener('click', () => {
        const color = buttonAttributes[index].hidden;
        if(!firstClick && clickButton.style.backgroundColor === 'rgb(239, 239, 239)'){
          console.log('First');
          firstClick = {color, index};
          firstClickID = clickButton;
          clickButton.style.backgroundColor = color;
          return;
        }

        if(!secondClick && clickButton.style.backgroundColor === 'rgb(239, 239, 239)'){
          console.log('Second');
          secondClick = {color, index};
          secondClickID = clickButton;
          clickButton.style.backgroundColor = color;
          if(firstClick.color === secondClick.color && firstClick.index !== secondClick.index){
            document.querySelector('.js-result').innerHTML = 'MATCH';
            clearTimeout(timeoutID);
          }

          timeoutID = setTimeout(() => {
            if(document.querySelector('.js-result').innerHTML !== 'MATCH'){
              firstClickID.style.backgroundColor = `rgb(239, 239, 239)`;
              secondClickID.style.backgroundColor = `rgb(239, 239, 239)`;
            }
            document.querySelector('.js-result').innerHTML = "";
            firstClick = null;
            secondClick = null;
          }, 2000);
        }
      });
    });
  </script>
</html>